<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bay Area Current Transit Map (2026)</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }
        #map {
            height: 100vh;
            width: 100vw;
        }
        .legend {
            background: white;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            line-height: 24px;
            font-size: 14px;
            max-height: 80vh;
            overflow-y: auto;
        }
        .legend-title {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 10px;
        }
        .legend-item {
            margin: 5px 0;
        }
        .legend-line {
            display: inline-block;
            width: 30px;
            height: 3px;
            margin-right: 8px;
            vertical-align: middle;
        }
        /* Editable style variables */
        :root {
            --bart-red: #ED1C24;
            --bart-yellow: #FFE800;
            --bart-orange: #FF9933;
            --bart-green: #4DB848;
            --bart-blue: #0099CC;
            --caltrain-red: #E31837;
            --muni-color: #8B8D8E;
            --vta-blue: #0077C8;
            --vta-orange: #FF6A13;
            --vta-green: #00914A;
            --amtrak-color: #003B5C;
            --ace-color: #8B1A4F;
            --smart-color: #006838;
            --line-weight: 4;
            --station-size: 6;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script>
        // Initialize map centered on Bay Area
        const map = L.map('map').setView([37.7749, -122.2194], 10);

        // Add OpenStreetMap tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // BART Lines
        const bartLines = [
            // Red Line (Richmond - Millbrae/SFO)
            {coords: [[37.9368, -122.3534], [37.7033, -122.4668], [37.6213, -122.4009]], name: "Red Line (Richmond-Millbrae)", type: "bart-red"},
            // Yellow Line (Antioch - SFO/Millbrae)
            {coords: [[37.9955, -121.7802], [37.8715, -122.2697], [37.7933, -122.3968], [37.6213, -122.4009]], name: "Yellow Line (Antioch-SFO)", type: "bart-yellow"},
            // Orange Line (Richmond - Berryessa)
            {coords: [[37.9368, -122.3534], [37.8044, -122.2708], [37.3696, -121.8743]], name: "Orange Line (Richmond-Berryessa)", type: "bart-orange"},
            // Green Line (Berryessa - Daly City)
            {coords: [[37.3696, -121.8743], [37.7933, -122.3968], [37.7062, -122.4698]], name: "Green Line (Berryessa-Daly City)", type: "bart-green"},
            // Blue Line (Dublin/Pleasanton - Daly City)
            {coords: [[37.7018, -121.8996], [37.8044, -122.2708], [37.7062, -122.4698]], name: "Blue Line (Dublin-Daly City)", type: "bart-blue"}
        ];

        // Caltrain
        const caltrainRoute = [
            {coords: [[37.7764, -122.3943], [37.4530, -122.1817], [37.3541, -121.9552], [37.3299, -121.9017]], name: "Caltrain", type: "caltrain"}
        ];

        // Muni Metro Lines
        const muniLines = [
            {coords: [[37.7067, -122.4708], [37.7498, -122.4265], [37.7933, -122.3968]], name: "J Church", type: "muni"},
            {coords: [[37.7185, -122.4568], [37.7498, -122.4265], [37.7933, -122.3968]], name: "K Ingleside", type: "muni"},
            {coords: [[37.7427, -122.5066], [37.7498, -122.4265], [37.7933, -122.3968]], name: "L Taraval", type: "muni"},
            {coords: [[37.7230, -122.4690], [37.7498, -122.4265], [37.7933, -122.3968]], name: "M Ocean View", type: "muni"},
            {coords: [[37.7605, -122.5101], [37.7498, -122.4265], [37.7933, -122.3968]], name: "N Judah", type: "muni"},
            {coords: [[37.7133, -122.4693], [37.7933, -122.3968]], name: "S Shuttle", type: "muni"},
            {coords: [[37.7850, -122.4697], [37.7933, -122.3968]], name: "T Third Street", type: "muni"}
        ];

        // VTA Light Rail
        const vtaLines = [
            // Blue Line (Baypointe - Santa Teresa)
            {coords: [[37.4070, -121.9550], [37.3541, -121.9552], [37.2363, -121.7512]], name: "VTA Blue Line", type: "vta-blue"},
            // Orange Line (Alum Rock - Mountain View)
            {coords: [[37.3696, -121.8743], [37.3541, -121.9552], [37.3944, -122.0768]], name: "VTA Orange Line", type: "vta-orange"},
            // Green Line (Winchester - Old Ironsides)
            {coords: [[37.3117, -121.9509], [37.3541, -121.9552], [37.4070, -121.9550]], name: "VTA Green Line", type: "vta-green"}
        ];

        // Amtrak Capitol Corridor
        const amtrakRoute = [
            {coords: [[38.5816, -121.4944], [37.9368, -122.3534], [37.8044, -122.2708], [37.7764, -122.3943], [37.3299, -121.9017]], name: "Amtrak Capitol Corridor", type: "amtrak"}
        ];

        // ACE (Altamont Corridor Express)
        const aceRoute = [
            {coords: [[37.9522, -121.2908], [37.7018, -121.8996], [37.3299, -121.9017]], name: "ACE", type: "ace"}
        ];

        // SMART (Sonoma-Marin)
        const smartRoute = [
            {coords: [[38.5088, -122.8009], [38.2382, -122.6372]], name: "SMART", type: "smart"}
        ];

        // Major Stations
        const majorStations = [
            // BART Major Stations
            {coords: [37.9368, -122.3534], name: "Richmond BART"},
            {coords: [37.8715, -122.2697], name: "Berkeley Downtown BART"},
            {coords: [37.8044, -122.2708], name: "Oakland 12th St/City Center BART"},
            {coords: [37.7933, -122.3968], name: "Embarcadero BART"},
            {coords: [37.7844, -122.4084], name: "Powell St BART"},
            {coords: [37.7629, -122.4195], name: "16th St Mission BART"},
            {coords: [37.7062, -122.4698], name: "Daly City BART"},
            {coords: [37.6213, -122.4009], name: "Millbrae BART"},
            {coords: [37.7018, -121.8996], name: "Dublin/Pleasanton BART"},
            {coords: [37.3696, -121.8743], name: "Berryessa/North San José BART"},
            {coords: [37.9955, -121.7802], name: "Antioch BART"},
            // Caltrain Major Stations
            {coords: [37.7764, -122.3943], name: "San Francisco 4th & King Caltrain"},
            {coords: [37.5870, -122.3965], name: "Millbrae Caltrain"},
            {coords: [37.4530, -122.1817], name: "Palo Alto Caltrain"},
            {coords: [37.3299, -121.9017], name: "San José Diridon Caltrain"},
            // VTA Stations
            {coords: [37.3541, -121.9552], name: "Downtown San José VTA"},
            {coords: [37.4070, -121.9550], name: "Baypointe VTA"},
            {coords: [37.2363, -121.7512], name: "Santa Teresa VTA"},
            // SMART Stations
            {coords: [38.5088, -122.8009], name: "Windsor SMART"},
            {coords: [38.2382, -122.6372], name: "San Rafael SMART"}
        ];

        // Style functions
        function getLineStyle(type) {
            const styles = {
                'bart-red': {color: getComputedStyle(document.documentElement).getPropertyValue('--bart-red').trim() || '#ED1C24', weight: 4, opacity: 0.9},
                'bart-yellow': {color: getComputedStyle(document.documentElement).getPropertyValue('--bart-yellow').trim() || '#FFE800', weight: 4, opacity: 0.9},
                'bart-orange': {color: getComputedStyle(document.documentElement).getPropertyValue('--bart-orange').trim() || '#FF9933', weight: 4, opacity: 0.9},
                'bart-green': {color: getComputedStyle(document.documentElement).getPropertyValue('--bart-green').trim() || '#4DB848', weight: 4, opacity: 0.9},
                'bart-blue': {color: getComputedStyle(document.documentElement).getPropertyValue('--bart-blue').trim() || '#0099CC', weight: 4, opacity: 0.9},
                'caltrain': {color: getComputedStyle(document.documentElement).getPropertyValue('--caltrain-red').trim() || '#E31837', weight: 4, opacity: 0.9},
                'muni': {color: getComputedStyle(document.documentElement).getPropertyValue('--muni-color').trim() || '#8B8D8E', weight: 3, opacity: 0.9},
                'vta-blue': {color: getComputedStyle(document.documentElement).getPropertyValue('--vta-blue').trim() || '#0077C8', weight: 3, opacity: 0.9},
                'vta-orange': {color: getComputedStyle(document.documentElement).getPropertyValue('--vta-orange').trim() || '#FF6A13', weight: 3, opacity: 0.9},
                'vta-green': {color: getComputedStyle(document.documentElement).getPropertyValue('--vta-green').trim() || '#00914A', weight: 3, opacity: 0.9},
                'amtrak': {color: getComputedStyle(document.documentElement).getPropertyValue('--amtrak-color').trim() || '#003B5C', weight: 4, opacity: 0.9},
                'ace': {color: getComputedStyle(document.documentElement).getPropertyValue('--ace-color').trim() || '#8B1A4F', weight: 4, opacity: 0.9},
                'smart': {color: getComputedStyle(document.documentElement).getPropertyValue('--smart-color').trim() || '#006838', weight: 4, opacity: 0.9}
            };
            return styles[type] || {color: '#000', weight: 3, opacity: 0.8};
        }

        // Draw all routes
        [...bartLines, ...caltrainRoute, ...muniLines, ...vtaLines, ...amtrakRoute, ...aceRoute, ...smartRoute].forEach(route => {
            L.polyline(route.coords, getLineStyle(route.type))
                .bindPopup(`<b>${route.name}</b>`)
                .addTo(map);
        });

        // Draw major stations
        majorStations.forEach(station => {
            L.circleMarker(station.coords, {
                radius: 6,
                fillColor: '#333',
                color: '#fff',
                weight: 2,
                opacity: 1,
                fillOpacity: 0.9
            }).bindPopup(`<b>${station.name}</b>`).addTo(map);
        });

        // Add legend
        const legend = L.control({position: 'bottomright'});
        legend.onAdd = function(map) {
            const div = L.DomUtil.create('div', 'legend');
            div.innerHTML = `
                <div class="legend-title">Current Transit Systems (2026)</div>
                <div class="legend-item"><b>BART Lines</b></div>
                <div class="legend-item">
                    <span class="legend-line" style="background: var(--bart-red, #ED1C24);"></span>
                    Red Line
                </div>
                <div class="legend-item">
                    <span class="legend-line" style="background: var(--bart-yellow, #FFE800);"></span>
                    Yellow Line
                </div>
                <div class="legend-item">
                    <span class="legend-line" style="background: var(--bart-orange, #FF9933);"></span>
                    Orange Line
                </div>
                <div class="legend-item">
                    <span class="legend-line" style="background: var(--bart-green, #4DB848);"></span>
                    Green Line
                </div>
                <div class="legend-item">
                    <span class="legend-line" style="background: var(--bart-blue, #0099CC);"></span>
                    Blue Line
                </div>
                <div class="legend-item"><b>Other Systems</b></div>
                <div class="legend-item">
                    <span class="legend-line" style="background: var(--caltrain-red, #E31837);"></span>
                    Caltrain
                </div>
                <div class="legend-item">
                    <span class="legend-line" style="background: var(--muni-color, #8B8D8E);"></span>
                    Muni Metro
                </div>
                <div class="legend-item">
                    <span class="legend-line" style="background: var(--vta-blue, #0077C8);"></span>
                    VTA Blue Line
                </div>
                <div class="legend-item">
                    <span class="legend-line" style="background: var(--vta-orange, #FF6A13);"></span>
                    VTA Orange Line
                </div>
                <div class="legend-item">
                    <span class="legend-line" style="background: var(--vta-green, #00914A);"></span>
                    VTA Green Line
                </div>
                <div class="legend-item">
                    <span class="legend-line" style="background: var(--amtrak-color, #003B5C);"></span>
                    Amtrak Capitol Corridor
                </div>
                <div class="legend-item">
                    <span class="legend-line" style="background: var(--ace-color, #8B1A4F);"></span>
                    ACE
                </div>
                <div class="legend-item">
                    <span class="legend-line" style="background: var(--smart-color, #006838);"></span>
                    SMART
                </div>
            `;
            return div;
        };
        legend.addTo(map);
    </script>
</body>
</html>